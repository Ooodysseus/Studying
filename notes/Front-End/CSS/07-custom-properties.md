# Змінні: CSS Custom Properties

## Вступ

CSS Custom Properties (змінні) — це потужний механізм для створення гнучких, масштабованих, легко підтримуваних стилів. Вони дозволяють централізовано керувати кольорами, розмірами, темами, анімаціями, адаптивністю.

## Історія/Походження

До появи custom properties змінні реалізовувалися через препроцесори (Sass, Less). У CSS3 з’явилися нативні змінні, які працюють у браузері, підтримують каскадування, спадкування, динамічну зміну через JS.

### Віхи розвитку змінних

-   **Sass/Less:** змінні на етапі компіляції
-   **CSS3:** custom properties, var(), підтримка браузерами
-   **2020+:** color-mix, color-scheme, динамічні теми

## Основний матеріал

### Синтаксис змінних

-   Оголошення: `--ім'я-змінної: значення;`
-   Використання: `var(--ім'я-змінної)`
-   Змінні можна оголошувати на будь-якому рівні (root, елемент, медіа-запит)

#### Приклад оголошення і використання

```css
:root {
    --main-color: #0077cc;
    --padding: 16px;
}
.box {
    color: var(--main-color);
    padding: var(--padding);
}
```

### Каскадування і спадкування

-   Змінні успадковуються, можуть перевизначатися на дочірніх елементах
-   Можна використовувати fallback: `var(--color, #333)`

#### Приклад спадкування

```css
:root {
    --font-size: 18px;
}
.section {
    --font-size: 22px;
}
.text {
    font-size: var(--font-size);
}
```

### Динамічна зміна через JS

-   Змінні можна змінювати через JS: `element.style.setProperty('--main-color', '#ffcc00')`

#### Приклад JS

```js
document.documentElement.style.setProperty("--main-color", "#ffcc00");
```

### Неочевидний приклад: темізація

```css
:root {
    --bg-light: #fff;
    --bg-dark: #222;
}
body {
    background: var(--bg-light);
}
@media (prefers-color-scheme: dark) {
    body {
        background: var(--bg-dark);
    }
}
```

### Неочевидний приклад: анімації

```css
:root {
    --duration: 0.5s;
}
.fade {
    transition: opacity var(--duration);
}
```

### Неочевидний приклад: адаптивність

```css
:root {
    --gap: 16px;
}
@media (max-width: 600px) {
    :root {
        --gap: 8px;
    }
}
.container {
    gap: var(--gap);
}
```

### Неочевидний приклад: fallback

```css
.box {
    color: var(--accent, #0077cc);
}
```

## Пояснення під капотом

Браузер парсить CSS, створює CSSOM, застосовує custom properties, оптимізує рендеринг, інтегрує з DOM, API (CSSOM, JS, темізація).

### Як працюють змінні у рушії

Custom properties інтегруються з DOM, підтримують каскадування, спадкування, динамічну зміну, впливають на layout, темізацію, продуктивність.

## Нюанси та підводні камені

-   Відсутність fallback — некоректний вигляд у старих браузерах
-   Надмірне вкладення змінних — складна підтримка
-   Відсутність темізації — поганий UX
-   Відсутність динамічної зміни — негнучкий дизайн
-   Відсутність адаптивності — некоректний layout

## Діаграми

```mermaid
graph TD
    ROOT[:root] --> VAR[--main-color]
    ROOT --> GAP[--gap]
    BOX[.box] --> VARB[var(--main-color)]
    CONTAINER[.container] --> VARG[var(--gap)]
    JS[JS] --> SETPROP[setProperty]
    MEDIA[@media] --> VARM[var(--gap)]
```

## Приклад застосування в реальних проєктах

-   Темізація — зміна кольорів, фонів, шрифтів
-   Адаптивність — gap, padding, font-size
-   Анімації — duration, delay
-   SPA — динамічна зміна теми через JS
-   Корпоративні сайти — централізовані змінні

### Кейс: темізація

Custom properties для світлої/темної теми.

### Кейс: продуктивність

Централізовані змінні, оптимізація стилів.

## Крос-посилання

-   [CSS: адаптивність](./06-responsive.md)
-   [CSS: layout](./04-layout.md)
-   [Best practices](../HTML/10-best-practices.md)
-   [HTML: семантичні теги](../HTML/03-semantic-tags.md)

## Підсумок

-   CSS Custom Properties — основа гнучких стилів
-   Каскадування, спадкування, динамічна зміна — ключові механізми
-   Неочевидні приклади — для темізації, адаптивності, анімацій
