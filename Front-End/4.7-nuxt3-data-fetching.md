## 4.7. Nuxt 3 Data Fetching

### useAsyncData

`useAsyncData` — хук для асинхронного отримання даних на сервері та клієнті.

```js
<script setup>
    const {(data, pending, error)} = await useAsyncData('users', () =>
    $fetch('/api/users'));
</script>
```

-   Підтримує SSR, кешування, автоматичне оновлення.

---

### useFetch

`useFetch` — хук для простого отримання даних з API.

```js
<script setup>
    const {(data, pending, error)} = await useFetch('/api/posts');
</script>
```

-   Працює як на сервері, так і на клієнті.
-   Підтримує автоматичне оновлення.

---

### API Routes

API routes — створення серверних endpoint'ів у папці `server/api`.

```js
// server/api/hello.js
export default defineEventHandler((event) => {
    return { message: "Hello from API!" };
});
```

-   Доступ через `/api/hello`.
-   Підтримка TypeScript, middlewares.

---

### Server Routes

Server routes — обробка запитів на сервері Nuxt 3.

```js
// server/routes/user.ts
export default eventHandler(async (event) => {
    const id = event.context.params.id;
    // ...fetch user by id
});
```

-   Використовуйте для складної логіки, інтеграції з базами даних.

---

### Mermaid Diagram: Nuxt 3 Data Fetching

```mermaid
graph TD
    A[useAsyncData] --> B[$fetch]
    C[useFetch] --> D[/api/posts]
    E[API Routes] --> F[server/api]
    G[Server Routes] --> H[server/routes]
```

_Отримання даних у Nuxt 3_

---

#### Navigation

-   [Попередня тема: Nuxt 3 Fundamentals](4.6-nuxt3-fundamentals.md)
-   [Наступна тема: Nuxt 3 Advanced](4.8-nuxt3-advanced.md)
